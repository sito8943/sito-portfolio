import{r as s}from"./index-fcbbbea1.js";function I(r,p,l,c){if(l===void 0&&(l=function(){}),c===void 0&&(c={}),!r)throw new Error("Target element to observe should be a valid DOM Node");var n=Object.assign({},{viewport:null,modTop:"0px",modRight:"0px",modBottom:"0px",modLeft:"0px",threshold:[0]},c),e=n.viewport,d=n.modTop,f=n.modLeft,u=n.modBottom,h=n.modRight,o=n.threshold;if(!Array.isArray(o)&&typeof o!="number")throw new Error("threshold should be a number or an array of numbers");var t=Array.isArray(o)?o.map(function(b){return Math.floor(b%101)/100}):[Math.floor(o?o%101:0)/100],m=Math.min.apply(Math,t),v={root:e instanceof Node?e:null,rootMargin:d+" "+h+" "+u+" "+f,threshold:t},i=new IntersectionObserver(function(b,x){var a=b.filter(function(O){return O.target===r})[0],w=function(){return x.unobserve(r)};a&&(a.isInViewport=a.isIntersecting&&a.intersectionRatio>=m,a.isInViewport?p(a,w,r):l(a,w,r))},v);return i.observe(r),function(){return i.unobserve(r)}}function y(r){return typeof r=="object"&&"current"in r}function g(r){return typeof r=="function"&&typeof r.call=="function"}function R(r){r===void 0&&(r={});var p=s.useState(null),l=p[0],c=p[1],n=r.target,e=r.viewport,d=function(t,m){var v={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&m.indexOf(i)===-1&&(v[i]=t[i]);return v}(r,["target","viewport"]),f=s.useRef(null),u=s.useRef(null),h=s.useCallback(function(t){f.current=t,e&&(g(e)?e(t):y(e)&&(e.current=t))},[f,e]),o=s.useCallback(function(t){u.current=t,n&&(g(n)?n(t):y(n)&&(n.current=t))},[u,n]);return s.useEffect(function(){if(u.current)return I(u.current,function(){return c(!0)},function(){return c(!1)},Object.assign({},d,{viewport:f.current}))},[u.current,d,f]),[l,o,h]}export{R as u};
